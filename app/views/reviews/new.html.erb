<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <link type="text/css" rel="stylesheet" src="reviews_new_stylesheet.css">
    <title>Post a Review</title>
  </head>
  <body class="overlay">
    <h1>Post a Review</h1>

  <%= form_with scope: :review, url: reviews_path, local: true do |form| %>
    <p>
      <%= form.label :review_author %>
      <%= form.text_field :author %>
    </p>
      <%= form.label :review_email %>
      <%= form.email_field :email %>
    <p>
      <p>Review Rating</p>
      <%= form.label "1" %>
      <%= radio_button("review", "rating", 1) %>
      <label for="review_rating_1" id="star_1" class="material-icons">star_border</label>
      <%= form.label "2" %>
      <%= radio_button("review", "rating", 2) %>
      <label for="review_rating_2" id="star_2" class="material-icons">star_border</label>
      <%= form.label "3" %>
      <%= radio_button("review", "rating", 3) %>
      <label for="review_rating_3" id="star_3" class="material-icons">star_border</label>
      <%= form.label "4" %>
      <%= radio_button("review", "rating", 4) %>
      <label for="review_rating_4" id="star_4" class="material-icons">star_border</label>
      <%= form.label "5" %>
      <%= radio_button("review", "rating", 5) %>
      <label for="review_rating_5" id="star_5" class="material-icons">star_border</label>
    </p>
    <p>
      <%= form.label :comments %>
    </p>
    <p>
      <%= form.text_area :comments %>
    </p>
    <p>
      <%= form.submit 'Submit' %>
    </p>
  <% end %>
  </body>

  <script type="text/javascript">
    (function () {
      var allStars = []

      for (i = 1; i <= 5; i++) {
        var star = document.getElementById(`star_${i}`)
        allStars.push(star)
      }

      allStars.forEach(function (star) {
        star.addEventListener('click', function() {
          allStars.forEach(function (unclickedStar) {
            unclickedStar.innerText = 'star_border'
            unclickedStar.style.color = 'black'
          })
          star.innerText = 'star'
          star.style.color = 'gold'
        })
      })
    })()
  </script>
</html>
